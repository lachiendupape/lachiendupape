version: "3"

services:
  navidrome:
    container_name: navidrome
    image: deluan/navidrome:latest
    environment:
      - PUID=1002
      - PGID=100
      - TZ=Europe/London
    volumes:
      - /share/CACHEDEV1_DATA/Containers/navidrome/config:/config
      - /share/CACHEDEV2_DATA/Photo/Music:/music
      - /share/CACHEDEV1_DATA/Containers/downloads:/downloads
      - /share/CACHEDEV1_DATA/Containers/navidrome/data:/data
    expose:
      - "4533"
    restart: unless-stopped
    networks:
      - media_network

  azuracast:
    image: azuracast/azuracast:latest
    container_name: azuracast
    environment:
      - AZURACAST_HTTP_PORT=80
      - AZURACAST_HTTPS_PORT=443
      - PUID=1002
      - PGID=100
      - TZ=Europe/London
    volumes:
      - /share/CACHEDEV1_DATA/Containers/azuracast/stations:/var/azuracast/stations
      - /share/CACHEDEV2_DATA/Photo/Music:/var/azuracast/uploads/music
      - /share/CACHEDEV1_DATA/Containers/azuracast/data:/var/azuracast
    ports:
      - "8000:8000"  # Icecast stream
      - "80:80"      # Web UI
      - "443:443"    # Optional HTTPS (if you set it up)
    restart: unless-stopped
    networks:
      - media_network

networks:
  media_network:
    external: true